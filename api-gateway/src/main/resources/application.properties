# --- Server and Application Configuration ---
server.port=9090
spring.application.name=api-gateway

# --- Eureka Client Configuration ---
# Yeh gateway ko batata hai ki service registry (discovery-server) kahan hai.
# IMPORTANT: Docker me 'localhost' ki jagah container ka naam use karna zaroori hai.
# Jab hum docker-compose se chalayenge, to isey override karenge. Abhi ke liye localhost rakhte hain.
eureka.client.service-url.defaultZone=http://discovery-server:8761/eureka

# --- Global CORS Configuration ---
# Yeh Spring Cloud Gateway ko batata hai ki Cross-Origin requests ko kaise handle karna hai.
# Yeh configuration saare routes ('/**') par apply hogi.
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-origins=http://localhost:3000, http://localhost:5173
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-methods=GET,POST,PUT,DELETE,OPTIONS,HEAD
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-headers=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allow-credentials=true
spring.cloud.gateway.globalcors.cors-configurations.[/**].max-age=3600

# --- Gateway Route Definitions ---
# Har microservice ke liye ek route. 'lb://' ka matlab hai ki Eureka se service ka address dhoondho.

# 1. Authentication Service (Handled by user-service)
spring.cloud.gateway.routes[0].id=auth-service-route
spring.cloud.gateway.routes[0].uri=lb://USER-SERVICE
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/auth/**

# 2. User Service (For user profiles)
spring.cloud.gateway.routes[1].id=user-service-route
spring.cloud.gateway.routes[1].uri=lb://USER-SERVICE
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/users/**

# 3. Workout Logger Service
spring.cloud.gateway.routes[2].id=workout-logger-service-route
spring.cloud.gateway.routes[2].uri=lb://WORKOUT-LOGGER-SERVICE
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/workouts/**

# 4. Nutrition Service
spring.cloud.gateway.routes[3].id=nutrition-service-route
spring.cloud.gateway.routes[3].uri=lb://NUTRITION-SERVICE
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/nutrition/**

# 5. Analytics Service (For stats)
spring.cloud.gateway.routes[4].id=analytics-service-route
spring.cloud.gateway.routes[4].uri=lb://ANALYTICS-SERVICE
spring.cloud.gateway.routes[4].predicates[0]=Path=/api/stats/**

# 6. Injury Prediction Service (For ACWR charts)
spring.cloud.gateway.routes[5].id=injury-prediction-service-route
spring.cloud.gateway.routes[5].uri=lb://INJURY-PREDICTION-SERVICE
spring.cloud.gateway.routes[5].predicates[0]=Path=/api/charts/**

# 7. Notification Service (For real-time SSE alerts)
spring.cloud.gateway.routes[6].id=notification-service-route
spring.cloud.gateway.routes[6].uri=lb://NOTIFICATION-SERVICE
spring.cloud.gateway.routes[6].predicates[0]=Path=/api/notifications/**

# 8. Goal Service
spring.cloud.gateway.routes[7].id=goal-service-route
spring.cloud.gateway.routes[7].uri=lb://GOAL-SERVICE
spring.cloud.gateway.routes[7].predicates[0]=Path=/api/goals/**

# 9. Personal Records (PR) Service
spring.cloud.gateway.routes[8].id=pr-service-route
spring.cloud.gateway.routes[8].uri=lb://PR-SERVICE
spring.cloud.gateway.routes[8].predicates[0]=Path=/api/prs/**

# 10. Recovery Service
spring.cloud.gateway.routes[9].id=recovery-service-route
spring.cloud.gateway.routes[9].uri=lb://RECOVERY-SERVICE
spring.cloud.gateway.routes[9].predicates[0]=Path=/api/recovery/**

# 11. Workout Planner Service
spring.cloud.gateway.routes[10].id=planner-service-route
spring.cloud.gateway.routes[10].uri=lb://PLANNER-SERVICE
spring.cloud.gateway.routes[10].predicates[0]=Path=/api/planner/**

# 12. AI Coach Service
spring.cloud.gateway.routes[11].id=ai-coach-service-route
spring.cloud.gateway.routes[11].uri=lb://AI-COACH-SERVICE
spring.cloud.gateway.routes[11].predicates[0]=Path=/api/coach/**

# 13. Gamification Service
spring.cloud.gateway.routes[12].id=gamification-service-route
spring.cloud.gateway.routes[12].uri=lb://GAMIFICATION-SERVICE
spring.cloud.gateway.routes[12].predicates[0]=Path=/api/gamification/**

# 14. Timeline Service
spring.cloud.gateway.routes[13].id=timeline-service-route
spring.cloud.gateway.routes[13].uri=lb://TIMELINE-SERVICE
spring.cloud.gateway.routes[13].predicates[0]=Path=/api/timeline/**